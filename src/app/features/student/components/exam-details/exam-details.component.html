<div *ngIf="!isLoading(); else loading">
  <h2>Detalhes do Exame</h2>

  <div *ngIf="exam() as exam">
    <h3>{{ exam.title }}</h3>
    <p>{{ exam.description }}</p>

    <div *ngIf="studentExam() as studentExam">
      <h4>Sua Pontuação: {{ studentExam.score.toFixed(2) }}%</h4>
      <p>Data de Submissão: {{ studentExam.submittedAt | date:'dd/MM/yyyy HH:mm' }}</p>

      <div *ngFor="let question of exam.questions; let i = index">
        <h5>Questão {{ i + 1 }}</h5>
        <p>{{ question.text }}</p>
        <ul>
          <li *ngFor="let option of question.options; let j = index"
              [class.correct-answer]="question.correctAnswer === (j | indexToLetter)"
              [class.student-answer]="studentExam.answers[i].selectedOption === (j | indexToLetter)">
            {{ j | indexToLetter }}) {{ option }}
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<ng-template #loading>
  <p>Carregando detalhes do exame...</p>
</ng-template>
