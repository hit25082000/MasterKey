<form [formGroup]="packageForm" (ngSubmit)="onSubmit()">
  <div class="form-group">
    <label for="name">Nome</label>
    <input id="name" formControlName="name" class="form-control" />
    <div *ngIf="packageForm.get('name')?.invalid && packageForm.get('name')?.touched" class="text-danger">
      Nome é obrigatório.
    </div>
  </div>
  <div class="form-group">
    <label for="price">Preço</label>
    <input id="price" formControlName="price" class="form-control" />
    <div *ngIf="packageForm.get('price')?.invalid && packageForm.get('price')?.touched" class="text-danger">
      Preço é obrigatório.
    </div>
  </div>
  <div class="form-group">
    <label for="description">Descrição</label>
    <input id="description" formControlName="description" class="form-control" />
    <div *ngIf="packageForm.get('description')?.invalid && packageForm.get('description')?.touched" class="text-danger">
      Descrição é obrigatória.
    </div>
  </div>
  <div class="form-group">
    <label for="workHours">Carga Horária</label>
    <input id="workHours" formControlName="workHours" class="form-control" />
    <div *ngIf="packageForm.get('workHours')?.invalid && packageForm.get('workHours')?.touched" class="text-danger">
      Carga Horária é obrigatória.
    </div>
  </div>

  <button type="button" (click)="courseModal.toggle()">Cursos</button>

  <app-modal #courseModal>
    <h4>Selecionar Cursos</h4>
    <app-course-selector
      [packageId]="packageId!"
      #courseSelector
      (coursesChanged)="onCoursesChanged()"
    ></app-course-selector>
  </app-modal>

  <div class="form-group">
    <h4>Cursos Selecionados</h4>
    <div *ngFor="let course of courseSelector.selectedCourses()">
      <p>
        <strong>{{ course.name }}</strong> - {{ course.description }}
      </p>
      <p>
        <button type="button" (click)="courseSelector.removeCourse(course.id); onCoursesChanged()">Remover</button>
      </p>
    </div>
  </div>

  <button
    type="submit"
    class="btn btn-primary"
    [disabled]="packageForm.invalid || !isFormDirty()"
  >
    {{ isEditMode() ? 'Atualizar' : 'Criar' }} Pacote
  </button>
</form>
